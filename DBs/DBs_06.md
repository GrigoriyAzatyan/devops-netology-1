# 6.6. Troubleshooting

#### 1. 
db.currentOp() - покажет список всех текущиъ операций, из него найдем нужную операцию.

db.killOp(opid) - убьем операцию.

Использовать EXPLAIN для долгих запросов, на основе результата выполнения команды, сделать выводы о том, стоит ли переделать запрос, до бавить индексы и т.д.

#### 2.
Т.к. с меньшим кол-вом реплик, Redis справлялся нормально, то вероятность того, что проблема в медленных запросал и transparent_hugepage, отпадает.
Думаю, что проблема, может быть связанна с нехваткой ресурсов.

#### 3.
Проблемы могли возникнуть по причине сбоя в сети и/или возросшей нагрузке.
Можно попробовать увеличить значения параметров connection_timeout, net_read_timeout и wait_timeout, так же,
стоит проанализаировать те запросы, на которых "отваливается" соединение, возможно их можно оптимизировать.
Так же стоит проверить кол-во потребляемых ресурсов, возможно их не хватает, и стоит добавить.

#### 4.

```When there is not enough memory left, the OOM killer invokes and kills the PostgreSQL process. Some people disable that process, but it is not recommended. You need to check the memory setting according to your hardware.```
Другими словами, система завершает процесс из-за не хватки памяти, в этом случае стоит добавить кол-во ресурсов, или же ограничить потребление СУБД командой ```work_mem (integer)```